(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-472a31a9"],{"0396":function(t,o,s){},"241a":function(t,o,s){"use strict";var i=s("0396"),n=s.n(i);n.a},"25f0":function(t,o,s){"use strict";var i=s("6eeb"),n=s("825a"),a=s("d039"),e=s("ad6d"),r="toString",c=RegExp.prototype,l=c[r],d=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=r;(d||u)&&i(RegExp.prototype,r,(function(){var t=n(this),o=String(t.source),s=t.flags,i=String(void 0===s&&t instanceof RegExp&&!("flags"in c)?e.call(t):s);return"/"+o+"/"+i}),{unsafe:!0})},"2faf":function(t,o,s){"use strict";var i=s("9f1d"),n=s.n(i);n.a},"3ca3":function(t,o,s){"use strict";var i=s("6547").charAt,n=s("69f3"),a=s("7dd0"),e="String Iterator",r=n.set,c=n.getterFor(e);a(String,"String",(function(t){r(this,{type:e,string:String(t),index:0})}),(function(){var t,o=c(this),s=o.string,n=o.index;return n>=s.length?{value:void 0,done:!0}:(t=i(s,n),o.index+=t.length,{value:t,done:!1})}))},"4df4":function(t,o,s){"use strict";var i=s("0366"),n=s("7b0b"),a=s("9bdd"),e=s("e95a"),r=s("50c4"),c=s("8418"),l=s("35a1");t.exports=function(t){var o,s,d,u,f,v,h=n(t),p="function"==typeof this?this:Array,C=arguments.length,g=C>1?arguments[1]:void 0,m=void 0!==g,w=l(h),_=0;if(m&&(g=i(g,C>2?arguments[2]:void 0,2)),void 0==w||p==Array&&e(w))for(o=r(h.length),s=new p(o);o>_;_++)v=m?g(h[_],_):h[_],c(s,_,v);else for(u=w.call(h),f=u.next,s=new p;!(d=f.call(u)).done;_++)v=m?a(u,g,[d.value,_],!0):d.value,c(s,_,v);return s.length=_,s}},"5ced":function(t,o,s){},6199:function(t,o,s){"use strict";s.r(o);var i=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("div",{staticClass:"goods"},[s("div",{staticClass:"menu-wrapper"},[s("ul",t._l(t.goods,(function(o,i){return s("li",{key:i,staticClass:"menu-item",class:{current:i===t.currentIndex},on:{click:function(o){return t.clickMenuItem(i)}}},[s("span",{staticClass:"text bottom-border-1px"},[o.icon?s("img",{staticClass:"icon",attrs:{src:o.icon}}):t._e(),t._v(" "+t._s(o.name)+" ")])])})),0)]),s("div",{staticClass:"foods-wrapper"},[s("ul",{ref:"foodsUl"},t._l(t.goods,(function(o,i){return s("li",{key:i,staticClass:"food-list-hook"},[s("h1",{staticClass:"title"},[t._v(t._s(o.name))]),s("ul",t._l(o.foods,(function(o,i){return s("li",{key:i,staticClass:"food-item bottom-border-1px"},[s("div",{staticClass:"icon",on:{click:function(s){return t.showFood(o)}}},[s("img",{attrs:{width:"57",height:"57",src:o.icon}})]),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(o.name))]),s("p",{staticClass:"desc"},[t._v(t._s(o.description))]),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("月售"+t._s(o.sellCount)+"份")]),s("span",[t._v("好评率"+t._s(o.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(o.price))]),o.oldPrice?s("span",{staticClass:"old"},[t._v("￥"+t._s(o.oldPrice))]):t._e()]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:o}})],1)])])})),0)])})),0)]),s("ShopCart")],1),s("Food",{ref:"food",attrs:{food:t.food}})],1)},n=[];s("c740"),s("4160"),s("159b");function a(t,o){(null==o||o>t.length)&&(o=t.length);for(var s=0,i=new Array(o);s<o;s++)i[s]=t[s];return i}function e(t){if(Array.isArray(t))return a(t)}s("a4d3"),s("e01a"),s("d28b"),s("a630"),s("d3b7"),s("3ca3"),s("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}s("fb6a"),s("b0c0"),s("25f0");function c(t,o){if(t){if("string"===typeof t)return a(t,o);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?a(t,o):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){return e(t)||r(t)||c(t)||l()}var u=s("5530"),f=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"cartcontrol"},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"iconfont icon-remove_circle_outline",on:{click:function(o){return t.updateFoodCount(!1)}}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),s("div",{staticClass:"iconfont icon-add_circle",on:{click:function(o){return t.updateFoodCount(!0)}}})],1)},v=[],h={name:"CartControl",props:{food:Object},methods:{updateFoodCount:function(t){this.$store.dispatch("updateFoodCount",{isAdd:t,food:this.food})}}},p=h,C=(s("7cf5"),s("2877")),g=Object(C["a"])(p,f,v,!1,null,null,null),m=g.exports,w=function(){var t=this,o=t.$createElement,s=t._self._c||o;return t.isShow?s("div",{staticClass:"food"},[s("div",{staticClass:"food-content"},[s("div",{staticClass:"image-header"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.food.image,expression:"food.image"}]}),s("p",{staticClass:"foodpanel-desc"},[t._v(t._s(t.food.info))]),s("div",{staticClass:"back",on:{click:t.toggleShow}},[s("i",{staticClass:"iconfont icon-arrow_left"})])]),s("div",{staticClass:"content"},[s("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),s("div",{staticClass:"detail"},[s("span",{staticClass:"sell-count"},[t._v("月售 "+t._s(t.food.sellCount)+" 份")]),s("span",{staticClass:"rating"},[t._v("好评率 "+t._s(t.food.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:t.food}})],1)])]),s("div",{staticClass:"food-cover",on:{click:t.toggleShow}})]):t._e()},_=[],b={name:"Food",props:{food:Object},data:function(){return{isShow:!1}},methods:{toggleShow:function(){console.log(this.food),this.isShow=!this.isShow}},components:{CartControl:m}},y=b,S=(s("2faf"),Object(C["a"])(y,w,_,!1,null,"4f48097c",null)),x=S.exports,k=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",[s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-left",on:{click:t.toggleShow}},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount}},[s("i",{staticClass:"iconfont icon-shopping_cart",class:{highlight:t.totalCount}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),s("div",{staticClass:"price",class:{highlight:t.totalCount}},[t._v("￥"+t._s(t.totalPrice))]),s("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.info.deliveryPrice)+"元")])]),s("div",{staticClass:"content-right"},[s("div",{staticClass:"pay",class:t.payClass},[t._v(t._s(t.payText))])])]),s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),s("span",{staticClass:"empty",on:{click:t.clearCart}},[t._v("清空")])]),s("div",{staticClass:"list-content"},[s("ul",t._l(t.cartFoods,(function(o,i){return s("li",{key:i,staticClass:"food"},[s("span",{staticClass:"name"},[t._v(t._s(o.name))]),s("div",{staticClass:"price"},[s("span",[t._v("￥"+t._s(o.price))])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("CartControl",{attrs:{food:o}})],1)])})),0)])])])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"list-mask",on:{click:t.toggleShow}})])},A=[],O=s("2f62"),j=s("1fba"),$=s("76a0"),E={name:"ShopCart",data:function(){return{isShow:!1,show:!1}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(O["d"])(["cartFoods","info"])),Object(O["c"])(["totalCount","totalPrice"])),{},{payClass:function(){var t=this.totalPrice,o=this.info.minPrice;return t>=o?"enough":"not_enough"},payText:function(){var t=this.totalPrice,o=this.info.minPrice;return 0==t?"￥".concat(o,"元起送"):t<o?"还差￥".concat(o-t,"元起送"):"去结算"},listShow:function(){var t=this;return 0===this.totalCount?(this.isShow=!1,!1):(this.isShow&&this.$nextTick((function(){t.scroll?t.scroll.refresh():t.scroll=new j["a"](".list-content",{click:!0})})),this.isShow)}}),methods:{toggleShow:function(){this.totalCount>0&&(this.isShow=!this.isShow)},clearCart:function(){var t=this;$["MessageBox"].confirm("确定执行此操作?").then((function(){t.$store.dispatch("clearCart")}),(function(){}))}},components:{CartControl:m}},F=E,I=(s("241a"),Object(C["a"])(F,k,A,!1,null,"61e30e10",null)),P=I.exports,T={data:function(){return{scrollY:0,tops:[],food:{}}},mounted:function(){var t=this;this.$store.dispatch("getShopGoods",(function(){t.$nextTick((function(){t._initScroll(),t._initTops()}))}))},computed:Object(u["a"])(Object(u["a"])({},Object(O["d"])(["goods"])),{},{currentIndex:function(){var t=this.scrollY,o=this.tops,s=o.findIndex((function(s,i){return t>=s&&t<o[i+1]}));return s}}),methods:{_initScroll:function(){var t=this;new j["a"](".menu-wrapper",{click:!0}),this.foodsScroll=new j["a"](".foods-wrapper",{probeType:2,click:!0}),this.foodsScroll.on("scroll",(function(o){var s=o.y;t.scrollY=Math.abs(s)})),this.foodsScroll.on("scrollEnd",(function(o){var s=o.y;t.scrollY=Math.abs(s)}))},_initTops:function(){var t=[],o=0;t.push(o);var s=this.$refs.foodsUl.getElementsByClassName("food-list-hook");d(s).forEach((function(s){o+=s.clientHeight,t.push(o)})),this.tops=t,console.log(d(s))},clickMenuItem:function(t){console.log(t);var o=this.tops[t];this.scrollY=o,this.foodsScroll.scrollTo(0,-o,300)},showFood:function(t){this.food=t,console.log(t),this.$refs.food.toggleShow()}},components:{CartControl:m,Food:x,ShopCart:P}},N=T,M=(s("dda3"),Object(C["a"])(N,i,n,!1,null,null,null));o["default"]=M.exports},6547:function(t,o,s){var i=s("a691"),n=s("1d80"),a=function(t){return function(o,s){var a,e,r=String(n(o)),c=i(s),l=r.length;return c<0||c>=l?t?"":void 0:(a=r.charCodeAt(c),a<55296||a>56319||c+1===l||(e=r.charCodeAt(c+1))<56320||e>57343?t?r.charAt(c):a:t?r.slice(c,c+2):e-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},"7cf5":function(t,o,s){"use strict";var i=s("ad0a"),n=s.n(i);n.a},"9f1d":function(t,o,s){},a630:function(t,o,s){var i=s("23e7"),n=s("4df4"),a=s("1c7e"),e=!a((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:e},{from:n})},ad0a:function(t,o,s){},ad6d:function(t,o,s){"use strict";var i=s("825a");t.exports=function(){var t=i(this),o="";return t.global&&(o+="g"),t.ignoreCase&&(o+="i"),t.multiline&&(o+="m"),t.dotAll&&(o+="s"),t.unicode&&(o+="u"),t.sticky&&(o+="y"),o}},c740:function(t,o,s){"use strict";var i=s("23e7"),n=s("b727").findIndex,a=s("44d2"),e=s("ae40"),r="findIndex",c=!0,l=e(r);r in[]&&Array(1)[r]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(r)},d28b:function(t,o,s){var i=s("746f");i("iterator")},dda3:function(t,o,s){"use strict";var i=s("5ced"),n=s.n(i);n.a},ddb0:function(t,o,s){var i=s("da84"),n=s("fdbc"),a=s("e260"),e=s("9112"),r=s("b622"),c=r("iterator"),l=r("toStringTag"),d=a.values;for(var u in n){var f=i[u],v=f&&f.prototype;if(v){if(v[c]!==d)try{e(v,c,d)}catch(p){v[c]=d}if(v[l]||e(v,l,u),n[u])for(var h in a)if(v[h]!==a[h])try{e(v,h,a[h])}catch(p){v[h]=a[h]}}}},e01a:function(t,o,s){"use strict";var i=s("23e7"),n=s("83ab"),a=s("da84"),e=s("5135"),r=s("861d"),c=s("9bf2").f,l=s("e893"),d=a.Symbol;if(n&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),o=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(u[o]=!0),o};l(f,d);var v=f.prototype=d.prototype;v.constructor=f;var h=v.toString,p="Symbol(test)"==String(d("test")),C=/^Symbol\((.*)\)[^)]+$/;c(v,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,o=h.call(t);if(e(u,t))return"";var s=p?o.slice(7,-1):o.replace(C,"$1");return""===s?void 0:s}}),i({global:!0,forced:!0},{Symbol:f})}},fb6a:function(t,o,s){"use strict";var i=s("23e7"),n=s("861d"),a=s("e8b5"),e=s("23cb"),r=s("50c4"),c=s("fc6a"),l=s("8418"),d=s("b622"),u=s("1dde"),f=s("ae40"),v=u("slice"),h=f("slice",{ACCESSORS:!0,0:0,1:2}),p=d("species"),C=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!v||!h},{slice:function(t,o){var s,i,d,u=c(this),f=r(u.length),v=e(t,f),h=e(void 0===o?f:o,f);if(a(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!a(s.prototype)?n(s)&&(s=s[p],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return C.call(u,v,h);for(i=new(void 0===s?Array:s)(g(h-v,0)),d=0;v<h;v++,d++)v in u&&l(i,d,u[v]);return i.length=d,i}})}}]);
//# sourceMappingURL=chunk-472a31a9.31dca7b4.js.map